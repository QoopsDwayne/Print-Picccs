(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{X3zk:function(e,o,t){"use strict";t.r(o),t.d(o,"LoginPageModule",function(){return f});var i=t("ofXK"),n=t("3Pt+"),r=t("TEn/"),s=t("tyNb"),a=t("mrSG"),l=t("JZFu"),c=t("uxLX"),d=t("fXoL"),b=t("lzYf");function p(e,o){1&e&&(d.Qb(0,"div",17),d.Qb(1,"div",18),d.Qb(2,"p",19),d.rc(3,"Please enter a valid email address."),d.Pb(),d.Pb(),d.Pb())}function m(e,o){1&e&&(d.Qb(0,"div",17),d.Qb(1,"div",18),d.Qb(2,"p",20),d.rc(3,"Your password is incorrect."),d.Pb(),d.Pb(),d.Pb())}const u=function(){return["/signup"]},g=[{path:"",component:(()=>{class e{constructor(e,o,t,i,r,s,a,c){this.tcfpics=e,this.Alert=o,this.loadingCtrl=t,this.toastController=i,this.router=r,this.menuCtrl=s,this.modalController=a,this.formBuilder=c,this.db=l.a.firestore(),this.passwordType="password",this.passwordIcon="eye-off",this.loginForm=this.formBuilder.group({email:["",n.m.compose([n.m.required,n.m.email])],password:["",n.m.compose([n.m.required,n.m.minLength(6)])]})}ngOnInit(){}hideShowPassword(){this.passwordType="text"===this.passwordType?"password":"text",this.passwordIcon="eye-off"===this.passwordIcon?"eye":"eye-off"}resetPassword(){this.router.navigate(["reset-password"])}presentProfileModal(){return Object(a.b)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:c.a,cssClass:"profileModal"});return yield e.present()})}loginUser(e){return Object(a.b)(this,void 0,void 0,function*(){if(e.valid){let o=yield this.loadingCtrl.create();yield o.present(),setTimeout(()=>{o.dismiss()},4e3),this.tcfpics.login(e.value.email,e.value.password).then(e=>{l.a.auth().onAuthStateChanged(e=>{e.uid&&this.db.collection("users").where("userid","==",e.uid).get().then(o=>{o.empty||this.db.collection("users").doc(e.uid).onSnapshot(e=>{"client"==e.data().position?(this.router.navigate(["tabs/home"]),console.log("client selected")):"admin"==e.data().position&&(this.router.navigate(["/adminhome"]),console.log("admin selected"))})})})},e=>Object(a.b)(this,void 0,void 0,function*(){const o=yield this.Alert.create({message:e.message,buttons:[{text:"Ok",role:"cancel"}]});yield o.present()}))}else console.log("Form is not valid yet, current value:",e.value);this.loginForm.reset()})}resetepassword(){return Object(a.b)(this,void 0,void 0,function*(){let e=yield this.Alert.create({header:"Reset Password!",inputs:[{name:"Email",type:"email",placeholder:"Please enter Your Email"}],buttons:[{text:"cancel",handler:()=>{console.log("Confirm Cancel")}},{text:"send",handler:e=>{console.log("email sent"),this.tcfpics.resetepassword(e),this.ReseteMSG()}}]});yield e.present()})}ReseteMSG(){return Object(a.b)(this,void 0,void 0,function*(){const e=yield this.Alert.create({header:"Alert",subHeader:"Resete Successful",message:"Resete Link setup has been sent to your Email Account. Please check your Email inbox .",buttons:["OK"]});yield e.present()})}presentLoading(){return Object(a.b)(this,void 0,void 0,function*(){const e=yield this.loadingCtrl.create({message:"Loading"});yield e.present(),e.dismiss()})}ionViewWillEnter(){this.menuCtrl.enable(!1)}}return e.\u0275fac=function(o){return new(o||e)(d.Lb(b.a),d.Lb(r.b),d.Lb(r.Y),d.Lb(r.gb),d.Lb(s.g),d.Lb(r.Z),d.Lb(r.ab),d.Lb(n.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["app-login"]],decls:31,vars:11,consts:[[1,"login-box"],["align","center",1,"img"],["src","./../../assets/images/tcfpicicon.png"],["ng-submit","loginForm()",3,"formGroup"],["position","stacked","color","primary"],["name","mail","color","primary","slot","start"],["color","primary","placeholder","Enter email","formControlName","email"],["class","error",4,"ngIf"],["name","key","color","primary","slot","start"],["placeholder","Enter password","color","primary","formControlName","password","type","password","name","password","clearOnEdit","false",3,"type"],["color","primary","slot","end",3,"name","click"],[1,"align"],[2,"color","#4c8fa3","font-weight","500","font-weight","200","font-size","small",3,"click"],["text-center",""],["value","large","expand","block","color","primary","clear","",3,"click"],["button",""],[3,"routerLink"],[1,"error"],[1,"messages"],["color","primary",1,"errors"],[1,"errors"]],template:function(e,o){1&e&&(d.Qb(0,"ion-content"),d.Qb(1,"div",0),d.Qb(2,"div",1),d.Mb(3,"img",2),d.Pb(),d.Qb(4,"form",3),d.Qb(5,"ion-item"),d.Qb(6,"ion-label",4),d.rc(7,"Email"),d.Pb(),d.Mb(8,"ion-icon",5),d.Mb(9,"ion-input",6),d.qc(10,p,4,0,"div",7),d.Pb(),d.Qb(11,"ion-item"),d.Qb(12,"ion-label",4),d.rc(13,"Password"),d.Pb(),d.Mb(14,"ion-icon",8),d.Mb(15,"ion-input",9),d.Qb(16,"ion-icon",10),d.Yb("click",function(){return o.hideShowPassword()}),d.Pb(),d.qc(17,m,4,0,"div",7),d.Pb(),d.Pb(),d.Mb(18,"br"),d.Qb(19,"div",11),d.Qb(20,"a",12),d.Yb("click",function(){return o.resetepassword()}),d.rc(21,"Forgot Password?"),d.Pb(),d.Pb(),d.Mb(22,"br"),d.Qb(23,"div",13),d.Qb(24,"ion-button",14),d.Yb("click",function(){return o.loginUser(o.loginForm)}),d.rc(25,"Login"),d.Pb(),d.Mb(26,"br"),d.Pb(),d.Qb(27,"ion-item",15),d.Qb(28,"span",11),d.Qb(29,"a",16),d.rc(30,"Sign Up"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb()),2&e&&(d.Bb(4),d.hc("formGroup",o.loginForm),d.Bb(5),d.Db("invalid",!o.loginForm.controls.email.valid&&o.loginForm.controls.email.touched),d.Bb(1),d.hc("ngIf",!o.loginForm.controls.email.valid&&o.loginForm.controls.email.touched),d.Bb(5),d.Db("invalid",!o.loginForm.controls.password.valid&&o.loginForm.controls.password.touched),d.hc("type",o.passwordType),d.Bb(1),d.hc("name",o.passwordIcon),d.Bb(1),d.hc("ngIf",!o.loginForm.controls.password.valid&&o.loginForm.controls.password.touched),d.Bb(12),d.hc("routerLink",d.jc(10,u)))},directives:[r.n,n.n,n.j,n.d,r.y,r.A,r.t,r.x,r.fb,n.i,n.c,i.l,r.f,s.j,r.db],styles:[".bgc[_ngcontent-%COMP%]{background-size:cover}ion-content[_ngcontent-%COMP%]{height:100%;width:100%}.login-box[_ngcontent-%COMP%]{width:90%;margin:auto;height:auto;border-radius:5px;padding:10px}.login-box[_ngcontent-%COMP%]   .align[_ngcontent-%COMP%]{text-align:right;margin:auto;padding-top:6px}.login-box[_ngcontent-%COMP%]   .sthombe[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px}.login-box[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:15px;height:100%;width:100%;border-radius:20px;border:groove;margin:auto;border-color:#000}"]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[s.k.forChild(g)],s.k]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({imports:[[i.c,n.e,n.l,r.W,h]]}),e})()}}]);