(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"P/Uf":function(t,e,n){"use strict";n.r(e),n.d(e,"ProfilezPageModule",function(){return P});var i=n("ofXK"),o=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),r=n("mrSG"),a=n("JZFu"),d=n("IBG6"),l=n("/mYR"),b=n("fXoL"),h=n("lzYf");function u(t,e){1&t&&(b.Qb(0,"ion-card",11),b.Qb(1,"ion-card-content",12),b.Mb(2,"ion-skeleton-text",13),b.Mb(3,"br"),b.Mb(4,"ion-skeleton-text",14),b.Mb(5,"br"),b.Mb(6,"ion-skeleton-text",15),b.Pb(),b.Pb())}function p(t,e){if(1&t){const t=b.Rb();b.Qb(0,"ion-card"),b.Qb(1,"ion-card-header"),b.Qb(2,"ion-card-subtitle",16),b.rc(3),b.Pb(),b.Qb(4,"ion-card-title",16),b.rc(5),b.Pb(),b.Pb(),b.Qb(6,"ion-card-content",16),b.Qb(7,"img",17),b.Yb("click",function(){b.nc(t);const n=e.$implicit;return b.ac().openPreview(n.pic)}),b.Pb(),b.Mb(8,"br"),b.Pb(),b.Qb(9,"div",18),b.Qb(10,"ion-button",19),b.Yb("click",function(){b.nc(t);const n=e.$implicit;return b.ac().presentAlertDeletePics(n.id)}),b.Mb(11,"ion-icon",20),b.Pb(),b.Pb(),b.Qb(12,"div",18),b.Qb(13,"ion-button",19),b.Yb("click",function(){b.nc(t);const n=e.$implicit;return b.ac().presentAlertSharePic(n.id)}),b.Mb(14,"ion-icon",21),b.Pb(),b.Pb(),b.Mb(15,"br"),b.Pb()}if(2&t){const t=e.$implicit;b.Bb(3),b.sc(t.date),b.Bb(2),b.sc(t.comment),b.Bb(2),b.ic("src",t.pic,b.oc)}}const g=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,s,c,r){this.tcfpics=t,this.Alert=e,this.loadingController=n,this.toastController=i,this.formGroup=o,this.router=s,this.menuCtrl=c,this.modalController=r,this.storage=a.a.storage().ref(),this.db=a.a.firestore(),this.userID=a.a.auth().currentUser.uid,this.userPics=[],this.page=0,this.dummy=["dummy1","dummy2","dummy3","dummy4","dummy5"],this.presentLoadingWithOptions(),this.getUser(),this.db.collection("pics").doc(a.a.auth().currentUser.uid).collection("clientpics").orderBy("date","asc").onSnapshot(t=>{t.forEach(e=>{this.userPics=[],t.forEach(t=>{this.userPics.push(t.data()),this.id=t.data().id,this.comment=t.data().comment,this.pic=t.data().pic,this.pidid=t.data().pidid,this.date=t.data().date})})})}ngOnInit(){}getUser(){this.db.collection("users").doc(this.userID).onSnapshot(t=>{this.name=t.data().username,this.surname=t.data().surnamez,this.image=t.data().image})}presentLoadingWithOptions(){return Object(r.b)(this,void 0,void 0,function*(){const t=yield this.loadingController.create({spinner:"crescent",duration:5e3,message:"Loading Your Picccccs. Please wait...",translucent:!0,cssClass:"custom-class custom-loading",backdropDismiss:!0});yield t.present(),yield t.onDidDismiss()})}presentAlertSharePic(t){return Object(r.b)(this,void 0,void 0,function*(){const e=yield this.Alert.create({header:"Note!",message:"<strong>Are you sure you want to Share this Pic to Feedwall</strong> ???",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Yep",handler:()=>{this.sharePic(t)}}]});yield e.present()})}sharePic(t){return Object(r.b)(this,void 0,void 0,function*(){this.db.collection("pics").doc(this.userID).collection("clientpics").where("id","==",t).onSnapshot(e=>{e.forEach(e=>{this.feedncomment=e.data().comment,this.feeddate=e.data().date,this.feedpic=e.data().pic,this.feedid=e.data().pidid,this.addToFeed(t)})})})}addToFeed(t){this.db.collection("feedwall").add({pic:this.feedpic,id:t,comment:this.feedncomment,date:this.feeddate,pidid:this.feedid,name:this.name,surname:this.surname,image:this.image}).then(t=>{this.presentPicUploadSuccess(),this.db.collection("feedwall").doc(t.id).update({feedid:t.id})})}presentPicUploadSuccess(){return Object(r.b)(this,void 0,void 0,function*(){const t=yield this.Alert.create({header:"Success",message:"Your Pic was Shared to Feedwall",buttons:["Ok"]});yield t.present()})}loadUsers(t){this.userPics=this.userPics.concat(this.userPics),t&&t.target.complete()}presentAlertDeletePics(t){return Object(r.b)(this,void 0,void 0,function*(){const e=yield this.Alert.create({header:"Warning!",message:"<strong>Are you sure you want to Delete this Pic</strong>!!!",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Okay",handler:()=>{this.tcfpics.deletePics(t),this.ReloadPage()}}]});yield e.present()})}ReloadPage(){return Object(r.b)(this,void 0,void 0,function*(){const t=yield this.loadingController.create();yield t.present().then(()=>{this.menuCtrl.close().then(()=>{this.router.navigateByUrl("/tabs/profilez").then(()=>Object(r.b)(this,void 0,void 0,function*(){yield t.dismiss()}))})})})}loadMore(t){setTimeout(()=>{t.target.complete(),1e3===this.userPics.length&&(t.target.disabled=!0)},500)}openPreview(t){this.modalController.create({component:d.a,componentProps:{pic:t}}).then(t=>t.present())}uploadpic(){this.modalController.create({component:l.a,cssClass:"my-custom-class"}).then(t=>t.present())}ionViewWillEnter(){this.menuCtrl.enable(!0)}ionViewDidLeave(){this.menuCtrl.enable(!1)}}return t.\u0275fac=function(e){return new(e||t)(b.Lb(h.a),b.Lb(s.b),b.Lb(s.Y),b.Lb(s.gb),b.Lb(o.b),b.Lb(c.g),b.Lb(s.Z),b.Lb(s.ab))},t.\u0275cmp=b.Fb({type:t,selectors:[["app-profilez"]],decls:15,vars:4,consts:[["slot","start"],["color","primary"],["padding",""],[1,"login-box"],["style","align-content: center;",4,"ngIf"],[4,"ngFor","ngForOf"],["therehold","100px",3,"ionInfinite"],["color","primary","loadingSpinner","bubbles","loadingText","Loading more Piccs..."],["horizontal","end","vertical","bottom","slot","fixed"],["color","primary","tappable","",3,"click"],["name","image-outline"],[2,"align-content","center"],[1,"post-list-content"],["animated","",2,"width","250px","height","400px","border-radius","8px"],["animated","",2,"width","200px","border-radius","8px"],["animated","",2,"width","100px","border-radius","8px"],["color","primary",1,"align"],["tappable","",3,"src","click"],[1,"align"],["expand","outline",3,"click"],["name","trash","color","danger"],["name","share-social-outline","color","primary"]],template:function(t,e){1&t&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-buttons",0),b.Mb(3,"ion-menu-button",1),b.Pb(),b.Qb(4,"ion-title",1),b.rc(5),b.Pb(),b.Pb(),b.Pb(),b.Qb(6,"ion-content",2),b.Qb(7,"div",3),b.qc(8,u,7,0,"ion-card",4),b.qc(9,p,16,3,"ion-card",5),b.Qb(10,"ion-infinite-scroll",6),b.Yb("ionInfinite",function(t){return e.loadMore(t)}),b.Mb(11,"ion-infinite-scroll-content",7),b.Pb(),b.Pb(),b.Qb(12,"ion-fab",8),b.Qb(13,"ion-fab-button",9),b.Yb("click",function(){return e.uploadpic()}),b.Mb(14,"ion-icon",10),b.Pb(),b.Pb(),b.Pb()),2&t&&(b.Bb(5),b.uc(" ",e.name," ",e.surname," Profile "),b.Bb(3),b.hc("ngIf",0===e.userPics.length),b.Bb(1),b.hc("ngForOf",e.userPics))},directives:[s.s,s.V,s.g,s.D,s.U,s.n,i.l,i.k,s.v,s.w,s.o,s.p,s.t,s.h,s.i,s.L,s.j,s.k,s.l,s.f],styles:[".bgc[_ngcontent-%COMP%]{background-size:cover}ion-content[_ngcontent-%COMP%]{height:100%;width:100%}.login-box[_ngcontent-%COMP%]{width:90%;margin:auto;height:auto;border-radius:5px;padding:10px}.login-box[_ngcontent-%COMP%]   .align[_ngcontent-%COMP%]{text-align:center;margin:auto;padding-top:6px}.login-box[_ngcontent-%COMP%]   .alignlright[_ngcontent-%COMP%]{text-align:right;margin:auto;padding-top:6px}.login-box[_ngcontent-%COMP%]   .align[_ngcontent-%COMP%]{align-content:center}.login-box[_ngcontent-%COMP%]   .align[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{max-width:100%!important;max-height:100%!important}.login-box[_ngcontent-%COMP%]   #user-profile[_ngcontent-%COMP%]{height:60%;width:80%;display:flex;justify-content:center;align-items:center}.login-box[_ngcontent-%COMP%]   #user-pic[_ngcontent-%COMP%]{position:relative}.login-box[_ngcontent-%COMP%]   #user-pic[_ngcontent-%COMP%], .login-box[_ngcontent-%COMP%]   #user-pic[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:200px;width:200px;border-radius:100px}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({imports:[[c.k.forChild(g)],c.k]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=b.Jb({type:t}),t.\u0275inj=b.Ib({imports:[[i.c,o.e,s.W,m]]}),t})()}}]);